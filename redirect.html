<!DOCTYPE html>
<html>
<head>
    <title>ネットワーク検証</title>
    <script>
        function checkNetworkAndRedirect() {
            // WebRTCを利用してローカルIPを取得する
            const peerConnection = new RTCPeerConnection({ iceServers: [] });
            peerConnection.createDataChannel('');
            peerConnection.createOffer().then(offer => peerConnection.setLocalDescription(offer));

            peerConnection.onicecandidate = (event) => {
                if (!event || !event.candidate) return;

                // IPアドレスの抽出
                const ipRegex = /([0-9]{1,3}\.){3}[0-9]{1,3}/;
                const ipMatch = event.candidate.candidate.match(ipRegex);
                const localIP = ipMatch ? ipMatch[0] : null;

                // 接続先ネットワークのIPアドレス範囲をチェック
                if (localIP && localIP.startsWith("192.168.2.")) {
                    // 条件に合う場合はリダイレクト
                    window.location.href = "https://docs.google.com/forms/d/e/1FAIpQLSdHwtc_fkQFS5Oz7IW_YKG38JQzoGaeMjmS438absq9UhJIog/viewform?usp=sharing";
                } else {
                    alert("このネットワークからはアクセスできません。");
                }
                peerConnection.close();
            };
        }
    </script>
</head>
<body>
    <h1>ネットワーク確認中...</h1>
    <script>
        // ページ読み込み時にネットワークをチェック
        checkNetworkAndRedirect();
    </script>
</body>
</html>

